branch_intelligence = {
##### CUSTOM #####
	intelligence_generalintel_center = {
	
		picture = GFX_agency_economy_department #NEEDS REPLACEMENT
		frame = GFX_upgrade_frame_economy #NEEDS REPLACEMENT
		sound = Spy_Agency_Intel_Upgrades_Confirm #NEEDS REPLACEMENT
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				civilian_intel_factor = 0.10
				army_intel_factor = 0.10
				navy_intel_factor = 0.10
				airforce_intel_factor = 0.10
			}
		}
	}
	
	intelligence_generalintel_spyplanes = {
	
		picture = GFX_agency_economy_department #NEEDS REPLACEMENT
		frame = GFX_upgrade_frame_economy #NEEDS REPLACEMENT
		sound = Spy_Agency_Intel_Upgrades_Confirm #NEEDS REPLACEMENT
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = intelligence_generalintel_center
			has_tech = jet_strategic_bomber3
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				civilian_intel_factor = 0.05
				army_intel_factor = 0.05
				navy_intel_factor = 0.05
				airforce_intel_factor = 0.05
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.05
				army_intel_factor = 0.05
				navy_intel_factor = 0.05
				airforce_intel_factor = 0.05
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.05
				army_intel_factor = 0.05
				navy_intel_factor = 0.05
				airforce_intel_factor = 0.05
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.05
				army_intel_factor = 0.05
				navy_intel_factor = 0.05
				airforce_intel_factor = 0.05
			}
		}
	}
	
	intelligence_generalintel_civilian = {
	
		picture = GFX_agency_economy_department #NEEDS REPLACEMENT
		frame = GFX_upgrade_frame_economy #NEEDS REPLACEMENT
		sound = Spy_Agency_Intel_Upgrades_Confirm #NEEDS REPLACEMENT
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = intelligence_generalintel_center
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				civilian_intel_factor = 0.10
				navy_intel_factor = 0.10
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.10
				navy_intel_factor = 0.10
			}
		}
	}
	
	intelligence_generalintel_military = {
	
		picture = GFX_agency_economy_department #NEEDS REPLACEMENT
		frame = GFX_upgrade_frame_economy #NEEDS REPLACEMENT
		sound = Spy_Agency_Intel_Upgrades_Confirm #NEEDS REPLACEMENT
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = intelligence_generalintel_center
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				airforce_intel_factor = 0.10
				army_intel_factor = 0.10
			}
			#available = {
			#	has_tech = jet_strategic_bomber2
			#}
		}
		level = {
			modifier = {
				airforce_intel_factor = 0.10
				army_intel_factor = 0.10
			}
			#available = {
			#	has_tech = jet_strategic_bomber3
			#}
		}
	}
	
	intelligence_generalintel_space = {
	
		picture = GFX_agency_economy_department #NEEDS REPLACEMENT
		frame = GFX_upgrade_frame_economy #NEEDS REPLACEMENT
		sound = Spy_Agency_Intel_Upgrades_Confirm #NEEDS REPLACEMENT
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = intelligence_generalintel_center
			has_tech = coms_II
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 25
		}
		
		level = {
			modifier = {
				civilian_intel_factor = 0.10
				army_intel_factor = 0.05
				navy_intel_factor = 0.10
				airforce_intel_factor = 0.05
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.15
				navy_intel_factor = 0.15
			}
		}
		level = {
			modifier = {
				civilian_intel_factor = 0.05
				army_intel_factor = 0.15
				airforce_intel_factor = 0.15
			}
		}
	}
	
}


branch_operation = {

	operation_patenttransfer = {
	
		picture = GFX_agency_steal_blueprints
		sound = Spy_Agency_Operations_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				operation_steal_tech_outcome = 0.25
			}
		}
		level = {
			modifier = {
				operation_steal_tech_outcome = 0.25
			}
		}
		
	}
	
	operation_terrorism = {
	
		picture = GFX_agency_plastic_explosives
		sound = Spy_Agency_Operations_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_tech = ammo_explosives_2
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 8
		}
		
		level = {
			modifier = {
				target_sabotage_factor = 0.25
				boost_resistance_factor = 0.25
			}
		}
		level = {
			modifier = {
				target_sabotage_factor = 0.25
				boost_resistance_factor = 0.25
			}
		}
		
	}
	
	operation_suicide = {
	
		picture = GFX_agency_suicide_pills
		sound = Spy_Agency_Operations_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				operative_death_on_capture_chance = 0.2
				own_operative_detection_chance = -0.1
			}
		}
		level = {
			modifier = {
				operative_death_on_capture_chance = 0.2
				own_operative_detection_chance = -0.1
			}
		}
		
	}
	
##### CUSTOM #####
	
	operation_coms = {
	
		picture = GFX_agency_portable_radios
		sound = Spy_Agency_Operations_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
	
		available = {
			has_tech = consumer_electronics_II
		}

		modifiers_during_progress = {
			civilian_factory_use = 8
		}
		
		level = {
			modifier = {
				operation_coordinated_strike_outcome = 0.5
			}
		}
		level = {
			modifier = {
				operation_coordinated_strike_outcome = 0.5
			}
		}
		level = {
			modifier = {
				operation_coordinated_strike_outcome = 0.5
			}
		}
		
	}
	
	operation_discrete_listening_devices = {
	
		picture = GFX_agency_invisible_ink
		sound = Spy_Agency_Operations_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				intel_from_operatives_factor = 0.2
				operation_steal_tech_risk = -0.25
			}
		}
		level = {
			modifier = {
				intel_from_operatives_factor = 0.2
				operation_steal_tech_risk = -0.25
			}
		}
		
	}
}

branch_operative = {

	operative_spy_cells = {
	
		picture = GFX_agency_localized_training_center
		Sound = Spy_Agency_Training_Facilities_Upgrades_Confirm
		
		ai_will_do = {
			factor = 2
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 15
		}
		
		level = {
			modifier = {
				enemy_operative_recruitment_chance = 0.10
				occupied_operative_recruitment_chance = 0.10
				new_operative_slot_bonus = 1
			}
			
			complete_effect = {
				unlock_decision_category_tooltip = lar_local_recruitment
			}
		}
		level = {
			modifier = {
				enemy_operative_recruitment_chance = 0.10
				occupied_operative_recruitment_chance = 0.10
				new_operative_slot_bonus = 1
			}
		}
		level = {
			modifier = {
				enemy_operative_recruitment_chance = 0.05
				occupied_operative_recruitment_chance = 0.05
				new_operative_slot_bonus = 1
			}
		}
		
	}
	
	operative_special_forces = {
	
		picture = GFX_agency_commando_training
		sound = Spy_Agency_Training_Facilities_Upgrades_Confirm	

		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_tech = army_sp_forces_3
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 15
		}
		
		level = {
			modifier = {
				commando_trait_chance_factor = 1 # +100%
			}
		}
		
	}
	
	operative_diplo_training = {
	
		picture = GFX_agency_diplomatic_training
		sound = Spy_Agency_Training_Facilities_Upgrades_Confirm

		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				control_trade_mission_factor = 0.25
				diplomatic_pressure_mission_factor = 0.25
			}
		}
		level = {
			modifier = {
				control_trade_mission_factor = 0.25
				diplomatic_pressure_mission_factor = 0.25
			}
		}
		
	}
	
	operative_psywarfare = { #CHANGE LOC TO PSYWARFARE
	
		picture = GFX_agency_psychological_warfare
		sound = Spy_Agency_Training_Facilities_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 4
		}
		
		level = {
			modifier = {
				propaganda_mission_factor = 0.25
			}
		}
		level = {
			modifier = {
				propaganda_mission_factor = 0.25
			}
		}
		
	}

##### CUSTOM #####

	operative_interrogation = {
	
		picture = GFX_agency_interrogation_techniques
		sound = Spy_Agency_Training_Facilities_Upgrades_Confirm

		ai_will_do = {
			factor = 1
		}
		
		available = {
			NOT = {
				has_global_flag = DLC_responsibilities
			}
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 10
		}
		
		level = {
			modifier = {
				enemy_operative_capture_chance_factor = 1
				enemy_operative_intel_extraction_rate = 0.10
			}
		}
		level = {
			modifier = {
				enemy_operative_intel_extraction_rate = 0.10
			}
		}
		
	}
}

branch_defense = {
	
	
	defense_counterintel = {
	
		picture = GFX_agency_defense_department
		frame = GFX_upgrade_frame_defense
		sound = Spy_Agency_Defense_Upgrades_Confirm
		
		ai_will_do = {
			factor = 2
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 5
		}
		
		level = {
			modifier = {
				intelligence_agency_defense = 1.5
			}
		}
		
		level = {
			modifier = {
				intelligence_agency_defense = 1.25
			}
		}
		
		level = {
			modifier = {
				intelligence_agency_defense = 1
			}
		}
		
		level = {
			modifier = {
				intelligence_agency_defense = 1
			}
		}
		
	}
	
##### CUSTOM #####

	defense_counter_insurgency = {
	
		picture = GFX_agency_anti_partisan
		sound = Spy_Agency_Defense_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 10
		}
		
		level = {
			modifier = {
				root_out_resistance_effectiveness_factor = 0.10
			}
		}
		
		level = {
			modifier = {
				root_out_resistance_effectiveness_factor = 0.15
			}
		}
		level = {
			modifier = {
				root_out_resistance_effectiveness_factor = 0.10
			}
		}
		
		level = {
			modifier = {
				root_out_resistance_effectiveness_factor = 0.15
			}
		}
	}

}

branch_crypto = {
	
	upgrade_form_department = {
	
		picture = GFX_agency_form_department
		frame = GFX_upgrade_frame_form
		sound = Spy_Agency_Cryptology_Upgrades_Confirm
		
		ai_will_do = {
			factor = 2
		}
		
		available = {
			has_tech = decryption_III
			has_tech = enc_III
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 8
		}
		
		level = {
			modifier = {
				crypto_department_enabled = 1
				crypto_strength = 1
				decryption_power = 25
			}
		}
		
	}
	
	crypto_offense_infiltration = {
	
		picture = GFX_agency_decryption_boost_1
		sound = Spy_Agency_Cryptology_Upgrades_Confirm
		
		ai_will_do = {
			factor = 2
		}
		
		available = {
			has_tech = decryption_I
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 10
		}
		
		level = {
			modifier = {
				decryption_power = 10
			}
		}
		
		level = {
			modifier = {
				decryption_power = 10
			}
		}
		level = {
			modifier = {
				decryption_power = 10
			}
		}
		
		level = {
			modifier = {
				decryption_power = 10
			}
		}
	}
	
	crypto_defense_infiltration = {
	
		picture = GFX_agency_cryptology_2
		sound = Spy_Agency_Cryptology_Upgrades_Confirm
		
		ai_will_do = {
			factor = 2
		}
		
		available = {
			has_tech = enc_I
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 10
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
	}

	crypto_offense_cyber = {
	
		picture = GFX_agency_decryption_boost_2
		sound = Spy_Agency_Cryptology_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = upgrade_form_department
			has_tech = decryption_III
		}
		
		modifiers_during_progress = {
			civilian_factory_use = 10
		}
		
		level = {
			modifier = {
				decryption_power = 15
			}
		}
		
		level = {
			modifier = {
				decryption_power = 15
			}
		}
		
		level = {
			modifier = {
				decryption_power = 15
			}
		}
		level = {
			modifier = {
				decryption_power = 15
			}
		}
		
	}
	
	crypto_defense_cyber = {
	
		picture = GFX_agency_cryptology_1
		sound = Spy_Agency_Cryptology_Upgrades_Confirm
		
		ai_will_do = {
			factor = 1
		}
		
		available = {
			has_done_agency_upgrade = upgrade_form_department
			has_tech = enc_III
		}
		
		
		modifiers_during_progress = {
			civilian_factory_use = 15
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
		level = {
			modifier = {
				crypto_strength = 1
			}
		}
	}
	
}
