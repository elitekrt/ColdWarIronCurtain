
scripted_gui = {
	Domestic_Intel_Button_Placeholder = {

		context_type = player_context
		ai_enabled = {
			always = no
		}
		window_name = "espionage_domestic_placeholder_tab"
		parent_window_name = countryintelligenceagencyview
		visible = {
			check_variable = { intel_domestic_toggle = 0 }
		}
        effects = {
            domestic_operation_tab_button_placeholder_click = {
                set_variable = {
                    intel_domestic_toggle = 1
                }
            }
        }
    }
	Espionage_Domestic_BG = {

		context_type = player_context
		ai_enabled = {
			always = no
		}
		window_name = "domestic_espionage_window"
		parent_window_name = countryintelligenceagencyview
		visible = {
			check_variable = { intel_domestic_toggle = 1 }
		}
		triggers = {
			operation_icon_false_flag_visible = {
				check_variable = {
					domestic_operation_array^i = 1
				}
			}
			operation_icon_domestic_infilitration_visible = {
				check_variable = {
					domestic_operation_array^i = 3
				}
			}
			operation_icon_launch_raid_visible = {
				check_variable = {
					domestic_operation_array^i = 2
				}
			}
			operation_icon_blacmail_visible = {
				check_variable = {
					domestic_operation_array^i = 4
				}
			}
			entry_background_not_available_visible = {
				NOT = { domestic_operation_completed_condition = yes }
				NOT = { domestic_operation_enact_condition = yes }
			}
			entry_background_available_visible = {
				NOT = { domestic_operation_completed_condition = yes }
				domestic_operation_enact_condition = yes
			}
			entry_background_completed_visible = {
				domestic_operation_completed_condition = yes
			}
			entry_button_visible = {
				NOT = { domestic_operation_completed_condition = yes }
			}
			entry_button_wip_icon_visible = {
				domestic_operation_wip_condition = yes 
			}
			entry_button_click_enabled = {
				#domestic_operation_enact_condition = yes
			}
			entry_button_completed_icon_visible = {
				domestic_operation_completed_condition = yes
			}
		}
		effects = {
			entry_button_click = {
				set_variable = { domestic_operation_select = 1 }
				set_variable = { domestic_operation_button_select = v }
				set_variable = { ROOT.Domestic_Progressbar_1 = domestic_operation_phase_progress^domestic_operation_button_select }
				set_variable = { ROOT.Domestic_Progressbar_Total = Domestic_Progressbar_Total^domestic_operation_button_select }
				domestic_operation_enact_effect = yes
			}

		}
				
		dynamic_lists = {
			domestic_operation_gridbox = {
				array = ROOT.domestic_operation_array
				entry_container = domestic_operation_entry
			}
		}
	}
	domestic_dissident_list = {
       context_type = player_context
        window_name = "domestic_dissident_list"
		parent_window_name = countryintelligenceagencyview
		visible = {
			check_variable = { root.dissident_menu = 0 } 
		}
        dynamic_lists = {
            domestic_dissident_listing_grid = {
                array = ROOT.domestic_dissident_list
                change_scope = yes
				entry_container = domestic_dissident_target_entry
            }
        }

		effects = {
			domestic_dissident_target_entry_button_click = { 
				set_variable = { ROOT.domestic_dissident_selected_id = v }
				ROOT = {
					clear_array = domestic_operation_array
					add_to_array = { domestic_operation_array = 1 }
					add_to_array = { domestic_operation_array = 2 }
					add_to_array = { domestic_operation_array = 3 }
					add_to_array = { domestic_operation_array = 4 }
					add_to_array = { domestic_operation_array = 5 }
					add_to_array = { domestic_operation_array = 6 }
					add_to_array = { domestic_operation_array = 7 }
					add_to_array = { domestic_operation_array = 8 }
					add_to_array = { domestic_operation_array = 9 }
					add_to_array = { domestic_operation_array = 10 }
					add_to_array = { domestic_operation_array = 11 }
					add_to_array = { domestic_operation_array = 12 }
					add_to_array = { domestic_operation_array = 13 }
					add_to_array = { domestic_operation_array = 14 }
					add_to_array = { domestic_operation_array = 15 }
					add_to_array = { domestic_operation_array = 16 }
					add_to_array = { domestic_operation_array = 17 }
				}
			}
		}
    }
    
	Domestic_Intel_Button_Tab = {

		context_type = player_context
		ai_enabled = {
			always = no
		}
		window_name = "espionage_domestic_tab"
		parent_window_name = countryintelligenceagencyview
		visible = {
			check_variable = { intel_domestic_toggle = 1 }
		}
		effects = {
            domestic_operation_tab_button_click = {
                set_variable = {
                    intel_domestic_toggle = 0
                }
            }
            alt_operations_tab_button_click = {
                set_variable = {
                    intel_domestic_toggle = 0
                }
            }
            alt_crypto_tab_button_click = {
                set_variable = {
                    intel_domestic_toggle = 0
                }
            }
        }
    }
	Operation_Overview_Window_Domestic = {

		context_type = player_context
		ai_enabled = {
			always = no
		}
		window_name = "operation_overview_window_domestic"
		dirty = Domestic_Progressbar_Total
		triggers = {

		}
		properties = {
			domestic_phase_progress_icon_10 = {
				frame = ROOT.Domestic_Progressbar_1
			}
			phase_progress_icon_2 = {
				frame = ROOT.Domestic_Progressbar_2
			}
			phase_progress_icon_3 = {
				frame = ROOT.Domestic_Progressbar_3
			}
			domestic_progressbar_content = {
				frame = ROOT.Domestic_Progressbar_Total
			}
		}
		visible = {
			check_variable = { domestic_operation_select = 1 }
		}
		effects = {
			btn_close_domestic_click = {
				set_variable = { domestic_operation_select = 0 }
			}
			domestic_btn_collect_click = {
				if = {
					limit = {
						check_variable = {
							domestic_operation_button_select = 2
						}
					}
					set_variable = { IC_DOMESTIC_OP_IN_PROGRESS_2 = 1 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 24 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 48 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 72 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 96 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 120 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 144 }
					country_event = { id = IC_DOMESTIC_OP.4 hours = 168 }

					country_event = { id = IC_DOMESTIC_OP.4 hours = 190 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 214 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 238 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 262 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 286 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 310 }
					country_event = { id = IC_DOMESTIC_OP.5 hours = 334 }

					country_event = { id = IC_DOMESTIC_OP.5 hours = 358 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 382 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 406 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 430 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 454 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 472 }
					country_event = { id = IC_DOMESTIC_OP.6 hours = 496 }
					country_event = { id = IC_DOMESTIC_OP.7 hours = 496 }

				}
				if = {
					limit = {
						check_variable = {
							domestic_operation_button_select = 1
						}
						set_variable = { domestic_target_1 = domestic_dissident_selected_id }
					}
				}
			}
        }
    }
}

